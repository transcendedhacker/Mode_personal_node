{
  "schema_version": "2.0.0",
  "description": "Schema contract for SDXL/Flux prompt generation engine",
  
  "assembly": {
    "order": [
      "subject",
      "age",
      "hair_color",
      "hair_style",
      "hair_ornament",
      "outfit",
      "outfit_detail",
      "pose",
      "mood",
      "location",
      "location_detail",
      "atmosphere",
      "lighting",
      "angle",
      "frame",
      "filter",
      "technical"
    ],
    "separator": ", ",
    "break_after": [8, 12, 15]
  },
  
  "blocks": {
    "subject": {
      "description": "Primary subject definition",
      "addon_enabled": true,
      "addon_merge_mode": "inline_append",
      "fallback": "person"
    },
    "age": {
      "description": "Age specification",
      "addon_enabled": true,
      "addon_merge_mode": "inline_append",
      "fallback": ""
    },
    "hair_color": {
      "description": "Hair color characteristics",
      "addon_enabled": true,
      "addon_merge_mode": "inline_append",
      "fallback": ""
    },
    "hair_style": {
      "description": "Hair styling and structure",
      "addon_enabled": true,
      "addon_merge_mode": "inline_append",
      "fallback": ""
    },
    "hair_ornament": {
      "description": "Hair accessories and adornments",
      "addon_enabled": true,
      "addon_merge_mode": "inline_append",
      "fallback": ""
    },
    "outfit": {
      "description": "Clothing and garments",
      "addon_enabled": true,
      "addon_merge_mode": "inline_append",
      "fallback": "clothed"
    },
    "outfit_detail": {
      "description": "Fabric and garment characteristics",
      "addon_enabled": true,
      "addon_merge_mode": "inline_append",
      "fallback": ""
    },
    "pose": {
      "description": "Body pose and action state",
      "addon_enabled": true,
      "addon_merge_mode": "inline_append",
      "fallback": "standing"
    },
    "mood": {
      "description": "Atmospheric mood and emotional tone",
      "addon_enabled": true,
      "addon_merge_mode": "inline_append",
      "fallback": ""
    },
    "location": {
      "description": "Physical setting and environment",
      "addon_enabled": true,
      "addon_merge_mode": "inline_append",
      "fallback": "neutral background"
    },
    "location_detail": {
      "description": "Environmental timing and conditions",
      "addon_enabled": true,
      "addon_merge_mode": "inline_append",
      "fallback": ""
    },
    "atmosphere": {
      "description": "Atmospheric quality and environmental effects",
      "addon_enabled": true,
      "addon_merge_mode": "inline_append",
      "fallback": ""
    },
    "lighting": {
      "description": "Light source and quality",
      "addon_enabled": true,
      "addon_merge_mode": "inline_append",
      "fallback": "natural lighting"
    },
    "angle": {
      "description": "Camera angle and perspective",
      "addon_enabled": true,
      "addon_merge_mode": "inline_append",
      "fallback": "eye-level shot"
    },
    "frame": {
      "description": "Framing and compositional structure",
      "addon_enabled": true,
      "addon_merge_mode": "inline_append",
      "fallback": ""
    },
    "filter": {
      "description": "Color grading and stylistic processing",
      "addon_enabled": true,
      "addon_merge_mode": "inline_append",
      "fallback": ""
    },
    "technical": {
      "description": "Camera and render quality parameters",
      "addon_enabled": true,
      "addon_merge_mode": "inline_append",
      "fallback": "photorealistic, detailed"
    }
  },
  
  "intent_flags": {
    "exposure_level": {
      "description": "Explicit clothing and exposure state",
      "values": ["covered", "implied", "nude"],
      "default": "covered",
      "override_behavior": "explicit_only"
    },
    "camera_relationship": {
      "description": "Subject awareness and camera orientation",
      "values": ["facing", "candid", "over_shoulder", "pov", "back_view"],
      "default": "facing",
      "override_behavior": "explicit_only"
    }
  },
  
  "weights": {
    "subject": 1.0,
    "age": 1.0,
    "hair_color": 1.0,
    "hair_style": 1.0,
    "hair_ornament": 1.0,
    "outfit": 1.0,
    "outfit_detail": 1.0,
    "pose": 1.2,
    "mood": 1.2,
    "location": 1.0,
    "location_detail": 1.0,
    "atmosphere": 1.3,
    "lighting": 1.3,
    "angle": 1.0,
    "frame": 1.0,
    "filter": 1.1,
    "technical": 1.0
  },
  
  "models": {
    "sdxl": {
      "weights": true,
      "multiplier": 1.0
    },
    "flux": {
      "weights": true,
      "multiplier": 0.85
    }
  },
  
  "addon_merge_rules": {
    "inline_append": {
      "description": "Addon text appended to selected option with comma separator",
      "example": "selected: 'woman' + addon: 'athletic build' → 'woman, athletic build'"
    }
  },
  
  "validation_rules": {
    "block_names_must_match_ordering": true,
    "library_blocks_must_exist_in_schema": true,
    "fallback_must_be_string_or_empty": true,
    "intent_flags_must_declare_default": true
  },
  
  "provenance": {
    "enabled": false,
    "comment": "# Generated using Mode_personal_node — CC BY-NC 4.0"
  }
}
